# Key bindings
set -g prefix C-z
unbind C-b
bind C-z send-prefix

# 設定ファイルのリロード
bind r source-file ~/.tmux.conf \; display-message "Reload Config!!"

# メニューバーの設定
set -g status-left ''
set -g status-right ''
#set -g status-justify centre
setw -g window-status-current-fg black
setw -g window-status-current-bg cyan
setw -g window-status-format "[#I]:#T"
setw -g window-status-current-format "[#I]:#T"
set -g message-fg black
set -g message-bg yellow
set -g status-fg black
set -g status-bg white
set -g pane-active-border-fg cyan

# ログ操作
bind-key @ pipe-pane -o 'bash -c "while read -r LINE; do echo \"[\$(date +\"%%Y-%%m-%%dT%%H:%%M:%%S\")] \${LINE}\" >> \${HOME}/var/log/tmux/\$(date +%Y%m%d-%H%M)-#S-#D.log; done "' \; display-message "Logging start."
bind-key ` pipe-pane \; display-message "Logging end."

# ペインをリサイズする
bind C-y resize-pane -L 1
bind C-u resize-pane -D 1
bind C-i resize-pane -U 1
bind C-o resize-pane -R 1

# ペイン分割
bind - split-window -v
#unbind |
bind \ split-window -h

# ペインの移動
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ペインのスタイル変更
bind C-t select-layout tiled
bind C-g select-layout even-horizontal
bind C-v select-layout even-vertical
bind C-r select-layout main-horizontal
bind C-f select-layout main-vertical

# ブロードキャストコマンド
bind C-b setw synchronize-panes on \; display-message "start synchronize-pane!!"
bind b setw synchronize-panes off \; display-message "end syncronize-pane"

# マウス操作を有効にする
bind m \
	setw -g mode-mouse on\;\
	set -g mouse-select-pane on\;\
	set -g mouse-resize-pane on\;\
	set -g mouse-select-window on\;\
	display "Mouse: ON"
bind M \
	setw -g mode-mouse off\;\
	set -g mouse-select-pane off\;\
	set -g mouse-resize-pane off\;\
	set -g mouse-select-window off\;\
	display "Mouse: OFF"

# 
#bind-key / command-prompt -p "new:" "new-window -n '(%1)' '%%'"
bind-key ? command-prompt -p "sub(|):" "split-window -h 'exec %%'"
bind-key / command-prompt -p "sub(-):" "split-window -v 'exec %%'"

# ssh
bind-key : command-prompt -p "ssh" "split-window -h 'exec sshpass -p $(openssl rsautl -inkey ~/.ssh/private.key -in ~/.ssh/secret -decrypt) ssh -o StrictHostKeyChecking=no %%'"
bind-key * command-prompt -p "ssh" "split-window -v 'exec sshpass -p $(openssl rsautl -inkey ~/.ssh/private.key -in ~/.ssh/secret -decrypt) ssh -o StrictHostKeyChecking=no %%'"

# vi keybind
set-window-option -g mode-keys vi

# color
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'
